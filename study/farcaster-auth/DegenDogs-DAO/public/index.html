<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Degen Dogs DAO</title>
    <link rel="preconnect" href="https://auth.farcaster.xyz">
    <link rel="icon" href="/dog.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="/assets/styles.css?v=20260111-31">
  </head>
  <body
    data-api-origin="https://degendogs-dao.ael-dev3.deno.net"
    data-app-version="20260111-31"
    data-firebase-api-key=""
    data-firebase-auth-domain=""
    data-firebase-project-id="degendogs-dao"
    data-firebase-app-id=""
    data-firebase-messaging-sender-id=""
    data-firebase-storage-bucket=""
  >
    <main class="app">
      <header class="topbar">
        <div class="brand">Degen Dogs DAO</div>
        <div id="wallet-pill" class="wallet-pill disconnected" role="status" aria-live="polite">
          <span class="wallet-dot" aria-hidden="true"></span>
          <span id="wallet-pill-label">Wallet not connected</span>
          <span id="wallet-pill-count" class="wallet-count" hidden>0</span>
        </div>
      </header>
      <header class="hero">
        <p class="eyebrow">Farcaster Mini App</p>
        <h1>Degen Dogs DAO</h1>
        <p class="lede">Sign in with Farcaster to verify holder status on Base.</p>
      </header>

      <section class="panel">
        <div class="status-grid">
          <div class="status" style="--delay: 0ms">
            <span class="label">Auth</span>
            <span id="auth-status" class="value">Not signed in</span>
          </div>
          <div class="status" style="--delay: 80ms">
            <span class="label">Wallet</span>
            <span id="wallet-status" class="value">Not connected</span>
          </div>
          <div class="status" style="--delay: 160ms">
            <span class="label">Chain</span>
            <span id="chain-status" class="value">Unknown</span>
          </div>
          <div class="status" style="--delay: 240ms">
            <span class="label">Dogs</span>
            <span id="dogs-status" class="value">Unchecked</span>
          </div>
        </div>

        <div class="actions">
          <button id="auth-btn" class="primary" type="button">Sign in &amp; verify</button>
          <button id="wallet-btn" class="ghost" type="button" disabled>Connect wallet</button>
        </div>

        <p class="hint">We verify Farcaster addresses first, then auto-check your connected wallet when available. Tap Connect wallet if needed.</p>

        <div id="result" class="result" data-state="idle" role="status" aria-live="polite">Ready to sign in and verify your holdings.</div>

        <div id="debug-panel" class="debug" hidden>
          <div class="debug-row">
            <span class="label">API base</span>
            <span id="debug-api" class="value"></span>
          </div>
          <div class="debug-row">
            <span class="label">Debug</span>
            <span id="debug-mode" class="value"></span>
          </div>
          <div class="debug-row">
            <span class="label">Version</span>
            <span id="debug-version" class="value"></span>
          </div>
          <pre id="debug-log" class="debug-log" aria-live="polite"></pre>
        </div>

        <div class="foot">
          <span>Contract</span>
          <a href="https://basescan.org/address/0x09154248fFDbaF8aA877aE8A4bf8cE1503596428" target="_blank" rel="noreferrer">0x0915...6428</a>
          <span>Base mainnet</span>
        </div>
      </section>
      <section id="posts-panel" class="panel board" data-state="disabled">
        <header class="panel-header">
          <div>
            <p class="eyebrow">DAO posts</p>
            <h2>Proposals &amp; threads</h2>
            <p class="lede">Create holder-only posts and vote on what happens next.</p>
            <p id="power-status" class="power-line">Voting power: 0</p>
          </div>
          <button id="refresh-posts" class="ghost" type="button">Refresh</button>
        </header>

        <div id="posts-status" class="result" data-state="idle" role="status" aria-live="polite">Loading posts...</div>

        <form id="post-form" class="post-form" autocomplete="off">
          <label class="field">
            <span>Title</span>
            <input id="post-title" name="title" type="text" maxlength="120" placeholder="Proposal title" required>
          </label>
          <label class="field">
            <span>Details</span>
            <textarea id="post-body" name="body" rows="4" maxlength="1200" placeholder="Describe the proposal or thread starter." required></textarea>
          </label>
          <button id="post-submit" class="primary" type="submit">Post</button>
        </form>

        <div id="posts-empty" class="empty" hidden>No posts yet.</div>
        <div id="posts-list" class="posts"></div>
      </section>
    </main>
    <script type="module" src="/assets/app.js?v=20260111-31"></script>
  </body>
</html>
